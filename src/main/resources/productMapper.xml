<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fp.mio.product.ProductMapper">

<select id="getProductAll" resultType="com.fp.mio.product.Product">

select * from product_master

</select>

<select id="getFood" resultType="com.fp.mio.product.Product">

select * from product_master where p_category1 = 'food'

</select>

<select id="getFashion" resultType="com.fp.mio.product.Product">

select * from product_master where p_category1 = 'fashion'

</select>

<select id="getBeauty" resultType="com.fp.mio.product.Product">

select * from product_master where p_category1 = 'beauty'

</select>

<select id="getLiving" resultType="com.fp.mio.product.Product">

select * from product_master where p_category1 = 'living'

</select>

<select id="getProductDetail" resultType="com.fp.mio.product.Product">

select * from product_master where p_num=#{p_num}

</select>

<select id="getProductCategory" resultType="com.fp.mio.product.Product">

select * from product_master where p_category2=#{p_category2}

</select>

<insert id="getProductzzim" parameterType="com.fp.mio.product.Zzim">
		insert into product_zzim
		values(product_zzim_seq.nextval,#{p_num}, #{z_id})
</insert>

<select id="getAccount" resultType="com.fp.mio.account.Account">
		select * from account_mio order by a_id
	</select>

	<select id="showzzim"	parameterType="com.fp.mio.account.Account" resultType="com.fp.mio.product.Zzim">
		SELECT *
	FROM product_zzim , account_mio, product_master
	WHERE product_zzim.z_id = account_mio.a_id
	AND product_zzim.z_num = product_master.p_num
	AND product_zzim.z_id = #{a_id}
	</select>

<delete id="deletezzim" parameterType="com.fp.mio.product.Zzim">
		delete from
		product_zzim where z_no = #{z_no}
	</delete>
	
<delete id="deleteReply" parameterType="com.fp.mio.product.ProductReply">
		delete from
		product_reply where r_no = #{r_no}
	</delete>


<select id="getProductSearch" resultType="com.fp.mio.product.Product">

select*from product_master where p_name like '%'||#{p_name}||'%' or p_brand like '%'||#{p_brand}||'%'

</select>

<insert id="writeReply"	parameterType="com.fp.mio.product.ProductReply">
		insert into product_reply
		values(product_reply_seq.nextval,
		#{r_p_no}, #{r_owner},
		#{r_txt}, #{r_rate}, sysdate)
	</insert>
	
	<select id="getReply" parameterType="com.fp.mio.product.Product"
		resultType="com.fp.mio.product.ProductReply">
		select *
		from product_reply
		where r_p_no = #{p_num}
	</select>
</mapper>